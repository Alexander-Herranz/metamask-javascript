<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>SMART CONTRACT JS TESTING</title>

  <!--
  <script src="https://cdn.jsdelivr.net/npm/vanillajs@1.0.1/dest/cjs/index.min.js"></script>
  -->


  <!-- ETHERS 5 (JAVASCRIPT) -->
  <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>


</head>

<body>

      <button id="sign_btn">Signature</button>

  

  <script type="module">

    var addr_contract = '0x71b5ebCe1dd6f529E7DD4F3a8C2ccAD5e610b71E';
    let chainId = 80001; //137;//
    let abi = [
    	{
    		"inputs": [],
    		"name": "getNumber",
    		"outputs": [
    			{
    				"internalType": "uint256",
    				"name": "",
    				"type": "uint256"
    			}
    		],
    		"stateMutability": "view",
    		"type": "function"
    	},
    	{
    		"inputs": [],
    		"name": "getText",
    		"outputs": [
    			{
    				"internalType": "string",
    				"name": "",
    				"type": "string"
    			}
    		],
    		"stateMutability": "view",
    		"type": "function"
    	},
    	{
    		"inputs": [
    			{
    				"internalType": "uint256",
    				"name": "num",
    				"type": "uint256"
    			}
    		],
    		"name": "setNumber",
    		"outputs": [],
    		"stateMutability": "nonpayable",
    		"type": "function"
    	},
    	{
    		"inputs": [
    			{
    				"internalType": "string",
    				"name": "txt",
    				"type": "string"
    			}
    		],
    		"name": "setText",
    		"outputs": [],
    		"stateMutability": "nonpayable",
    		"type": "function"
    	}
    ];



    document.getElementById("sign_btn").onclick = ()=> { sign() };


    async function sign() {
      let web3 = new ethers.providers.Web3Provider(window.ethereum);
      // MetaMask requires requesting permission to connect users accounts
      web3.send("eth_requestAccounts", []);
      // The MetaMask plugin also allows signing transactions
      const signer = web3.getSigner();


      let msg = "Hallo Welt";
      let signature = await signer.signMessage(msg);
      console.log(signature);
    }



  </script>



</body>

</html>
